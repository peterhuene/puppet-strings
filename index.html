<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><div id='filecontents'><h1>Puppet Strings</h1>

<p><a href="https://travis-ci.org/puppetlabs/puppet-strings"><img src="https://travis-ci.org/puppetlabs/puppet-strings.png?branch=master" alt="Build Status"></a> <a href="https://badge.fury.io/rb/puppet-strings"><img src="https://badge.fury.io/rb/puppet-strings.svg" alt="Gem Version"></a></p>

<p>A Puppet Face and plugin built on the <a href="http://yardoc.org/">YARD Documentation Tool</a> and the Puppet 4 Parser. It is uses YARD and the Puppet Parser to generate HTML documentation about Puppet code and Puppet extensions written in Ruby. It will eventually replace the <code>puppet doc</code> command once feature parity has been achieved.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><em>Code</em></td>
<td><a href="https://github.com/puppetlabs/puppet-strings">GitHub</a></td>
</tr>
<tr>
<td><em>Issues</em></td>
<td><a href="https://tickets.puppetlabs.com/browse/PDOC">Puppet Labs&#39; JIRA Tracker</a></td>
</tr>
<tr>
<td><em>License</em></td>
<td><a href="https://github.com/puppetlabs/puppet-strings/blob/master/LICENSE">Apache 2.0</a></td>
</tr>
<tr>
<td><em>Change log</em></td>
<td><a href="https://github.com/puppetlabs/puppet-strings/blob/master/CHANGELOG.md">CHANGELOG.md</a></td>
</tr>
<tr>
<td><em>Contributing</em></td>
<td><a href="https://github.com/puppetlabs/puppet-strings/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> and <a href="https://github.com/puppetlabs/puppet-strings/blob/master/COMMITTERS.md">COMMITTERS.md</a></td>
</tr>
</tbody></table>

<h2>Installation</h2>

<p>In order to run strings you need to have the following software installed:</p>

<ul>
<li>Ruby 1.9.3 or newer</li>
<li>Puppet 3.7 or newer</li>
<li>The YARD RubyGem</li>
</ul>

<h2>Installing the YARD Gem</h2>

<p><strong>Installing the YARD Gem with Puppet</strong></p>

<p>The easiest way to install the YARD gem is with Puppet itself.</p>

<p>For Puppet 4.x:</p>

<pre class="code ruby"><code class="ruby">$ puppet resource package yard provider=puppet_gem
</code></pre>

<p>For Puppet 3.x:</p>

<pre class="code ruby"><code class="ruby">$ puppet resource package yard provider=gem
</code></pre>

<h2>Installing Strings Itself</h2>

<p>Strings can be installed using the <a href="https://rubygems.org/gems/puppet-strings">puppet-strings RubyGem</a>. To ensure it is installed in right place, it is best to install it using Puppet.</p>

<p>For Puppet 4.x:</p>

<pre class="code ruby"><code class="ruby">$ puppet resource package puppet-strings provider=puppet_gem
</code></pre>

<p>For Puppet 3.x:</p>

<pre class="code ruby"><code class="ruby">$ puppet resource package puppet-strings provider=gem
</code></pre>

<h2>Running Puppet Strings</h2>

<p>Once strings has been installed you can document a puppet module:</p>

<pre class="code ruby"><code class="ruby">$ cd /path/to/module
$ puppet strings
</code></pre>

<p>This processes <code>README</code> and all Puppet and Ruby source files under the <code>./manifests/</code>, <code>./functions/</code>, and <code>./lib/</code>
directories by default.</p>

<p>To document specific files:</p>

<pre class="code ruby"><code class="ruby">$ puppet strings first.pp second.pp ...
</code></pre>

<p>To document specific directories:</p>

<pre class="code ruby"><code class="ruby">$ puppet strings &#39;modules/foo/lib/**/*.rb&#39; &#39;modules/foo/manifests/**/*.pp&#39; &#39;modules/foo/functions/**/*.pp&#39; ...
</code></pre>

<p>Strings can also emit the generated documentation as JSON:</p>

<pre class="code ruby"><code class="ruby">$ puppet strings generate manifest.pp --emit-json documentation.json
</code></pre>

<p>It can also print the JSON to stdout:</p>

<pre class="code ruby"><code class="ruby">$ puppet strings generate manifest.pp --emit-json-stdout
</code></pre>

<p>The schema for the JSON which Strings emits is <a href="https://github.com/puppetlabs/puppet-strings/blob/master/json_dom.md">documented here</a>.</p>

<p>Processing is delegated to the <code>yard</code> tool so some options listed in <code>yard help doc</code> are available.  However, Puppet Faces do not support passing arbitrary options through a face so these options must be specified in a <code>.yardopts</code> file.</p>

<p>In addition to generating a directory full of HTML, you can also serve up documentation for all your modules using the <code>server</code> action:</p>

<pre class="code ruby"><code class="ruby">$ puppet strings server
</code></pre>

<h2>Writing Compatible Documentation</h2>

<p>Since the strings module is built around YARD, a few different comment formats can be used.  YARD can work with RDoc, meaning it is backwards compatible with previously documented modules.  Feel free to try out strings with RDoc, but we are planning to move to Markdown as the standard.  You can configure which you would like YARD to use by adding a <code>.yardopts</code> file to the root of your module directory which specifies the desired format:</p>

<pre class="code ruby"><code class="ruby">--markup markdown
</code></pre>

<p>While we have yet to decide exactly how documentation should work in the future, here are some very basic examples to get you started using the strings module. These are very much subject to change as we continue to work out a style guide.</p>

<h3>Functions</h3>

<p>Here&#39;s an example of how you might document a 4x function:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># When given two numbers, returns the one that is larger.
</span><span class='comment'># You could have a several line description here if you wanted,
</span><span class='comment'># but I don&#39;t have much to say about this function.
</span><span class='comment'>#
</span><span class='comment'># @example using two integers
</span><span class='comment'>#   $bigger_int = max(int_one, int_two)
</span><span class='comment'>#
</span><span class='comment'># @return [Integer] the larger of the two parameters
</span><span class='comment'>#
</span><span class='comment'># @param num_a [Integer] the first number to be compared
</span><span class='comment'># @param num_b [Integer] the second number to be compared
</span><span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Functions</span><span class='period'>.</span><span class='id identifier rubyid_create_function'>create_function</span><span class='lparen'>(</span><span class='symbol'>:max</span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_max'>max</span><span class='lparen'>(</span><span class='id identifier rubyid_num_a'>num_a</span><span class='comma'>,</span> <span class='id identifier rubyid_num_b'>num_b</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_num_a'>num_a</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_num_b'>num_b</span> <span class='op'>?</span> <span class='id identifier rubyid_num_a'>num_a</span> <span class='op'>:</span> <span class='id identifier rubyid_num_b'>num_b</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3>Classes / Defined Types</h3>

<p>Here&#39;s an example of how you might document a class:</p>

<pre class="code puppet"><code class="puppet"># This class is meant to serve as an example of how one might
# want to document a manifest in a way that is compatible.
# with the strings module
#
# @example when declaring the example class
#   include example
#
# @param first_arg The first parameter for this class
# @param second_arg The second paramter for this class
class example (
  $first_arg  = $example::params::first_arg,
  $second_arg = $exampe::params::second_arg,
) { }
</code></pre>

<h3>Types and Providers</h3>

<p>Strings will automatically extract the <code>@doc</code> provider docstring and any <code>desc</code> parameter/property docstrings.</p>

<p>Sometimes however, Puppet types use metaprogramming to create parameters and methods automatically. In those cases Strings will not be able to document them automatically (Strings doesn&#39;t execute the code that would generate those parameters), so you will need to provide hints on how to document your code. To document a parameter which is automatically created you must use the special directive <code>@!puppet.type.param</code> or <code>@!puppet.type.property</code> which may take types, the parameter or property name, and a description.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># @!puppet.type.param my_parameter This parameter needs to be explicitly
</span><span class='comment'># documented as it is generated by mk_resource_methods
</span><span class='const'>Puppet</span><span class='op'>::</span><span class='const'>Type</span><span class='period'>.</span><span class='id identifier rubyid_newtype'>newtype</span><span class='lparen'>(</span><span class='symbol'>:minifile</span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='ivar'>@doc</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Manages files, including their content, ownership, and permissions.
    The provider can manage symbolic links.</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># This function does some metaprogramming on the new type.
</span>  <span class='id identifier rubyid_mk_resource_methods'>mk_resource_methods</span>

  <span class='id identifier rubyid_newparam'>newparam</span><span class='lparen'>(</span><span class='symbol'>:path</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_desc'>desc</span> <span class='heredoc_beg'>&lt;&lt;-&#39;EOT&#39;</span>
<span class='tstring_content'>      The path to the file to manage.  Must be fully qualified.
</span><span class='heredoc_end'>    EOT
</span>    <span class='comment'># ... do stuff here
</span>  <span class='kw'>end</span>
  <span class='comment'># ...
</span><span class='kw'>end</span>


</code></pre>

<p>Here are a few other good resources for getting started with documentation:</p>

<ul>
<li><a href="https://docs.puppet.com/puppet/latest/reference/modules_documentation.html">Module README Template</a></li>
<li><a href="http://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md">YARD Getting Started Guide</a></li>
<li><a href="http://www.rubydoc.info/gems/yard/file/docs/Tags.md">YARD Tags Overview</a></li>
</ul>

<h2>Rake Tasks</h2>

<p>Puppet Strings comes with two rake tasks: <code>strings:generate</code> and <code>strings:gh_pages</code> available in <code>puppet-strings/rake_tasks</code>.</p>

<p>Add the following to your Gemfile to use <code>puppet-strings</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>puppet-strings</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:git</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://github.com/puppetlabs/puppet-strings.git</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>In your <code>Rakefile</code>, add the following to use the <code>puppet-strings</code> tasks:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>puppet-strings/rake_tasks</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>In addition to generating the usual &#39;doc&#39; directory of HTML documentation, the <code>strings:generate</code> rake task will also drop a strings.json file containing a JSON representation of the module into the directory the rake task was run from.</p>

<p>The task <code>strings:generate</code> which is provided by including <code>puppet-strings/rake_tasks</code> will scan the manifests and lib directory from your single module. If you need to document a complete, or part of a, puppet tree, you can use the <code>PuppetStrings::RakeTasks::Generate</code> task. This rake task will by default overwrite strings:generate unless you specify a custom name. See the example below on how you can use it and which options it supports.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>puppet-strings/rake_tasks/generate</span><span class='tstring_end'>&#39;</span></span>

<span class='const'>PuppetStrings</span><span class='op'>::</span><span class='const'>RakeTasks</span><span class='op'>::</span><span class='const'>Generate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:documentation</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
  <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_paths'>paths</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>site/roles</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>site/profiles</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>modules/internal</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_excludes'>excludes</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/vendor/</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/example/</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='comment'># disables the strings.json output
</span>  <span class='comment'># module_resourcefiles are the patterns of included files. Below is the default.
</span>  <span class='comment'># task.module_resourcefiles = [&#39;manifests/**/*.pp&#39;, &#39;lib/**/*.rb&#39;]
</span><span class='kw'>end</span>
</code></pre>

<p>The <code>strings:gh_pages</code> task will generate your Strings documentation to be made available via <a href="https://pages.github.com/">GitHub Pages</a>. It will:</p>

<ol>
<li>Create a <code>doc</code> directory in the root of your project</li>
<li>Check out the <code>gh-pages</code> branch of the current repository in the <code>doc</code> directory (it will create a branch if one does not already exist)</li>
<li>Generate strings documentation using the <code>strings:generate</code> task</li>
<li>Commit the changes and push them to the <code>gh-pages</code> branch <strong>with the <code>-f</code> flag</strong></li>
</ol>

<p>This task aims to keep the <code>gh-pages</code> branch up to date with the current code and uses the <code>-f</code> flag when pushing to the <code>gh-pages</code> branch. Please keep this in mind as it <strong>will be destructive</strong> if not used properly.</p>

<h2>Developing and Contributing</h2>

<p>We love contributions from the community! If you&#39;d like to contribute to the strings module, check out <a href="https://github.com/puppetlabs/puppet-strings/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> to get information on the contribution process.</p>

<h2>Running Specs</h2>

<p>If you&#39;re going to be doing any development with puppet strings, it&#39;s essential that you can run the spec tests. You should simply have to do the following:</p>

<pre class="code ruby"><code class="ruby">$ bundle install --path .bundle/gems
$ bundle exec rake spec
</code></pre>

<h2>Support</h2>

<p>Please log tickets and issues at our <a href="https://tickets.puppetlabs.com/browse/PDOC">JIRA tracker</a>. A <a href="https://groups.google.com/forum/?fromgroups#!forum/puppet-users">mailing list</a> is available for asking questions and getting help from others. In addition there is an active #puppet channel on Freenode.</p>

<p>We use semantic version numbers for our releases, and recommend that users stay as up-to-date as possible by upgrading to patch releases and minor releases as they become available.</p>

<p>Bugfixes and ongoing development will occur in minor releases for the current major version. Security fixes will be backported to a previous major version on a best-effort basis, until the previous major version is no longer maintained.</p>

<h2>Caveats</h2>

<ul>
<li><p>Documentation blocks must immediately precede the documented code with no whitespace.  This is because the comment extractor possesses the elegance and intelligence of a bag of hammers.</p></li>
<li><p>This project is very much a work in progress and may very well have undiscovered bugs and pitfalls. If you discover any of these, <a href="https://tickets.puppetlabs.com/browse/PDOC">please file a ticket</a>.</p></li>
</ul>
</div></div>

      <div id="footer">
  Generated on Sun Sep 11 14:01:43 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.2.5).
</div>

    </div>
  </body>
</html>